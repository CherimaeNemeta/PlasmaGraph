package org.pvg.plasmagraph.controllers;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.SwingWorker;

import org.pvg.plasmagraph.models.MainModel;
import org.pvg.plasmagraph.views.MainView;

// TODO: Add more JavaDoc comments!
public class MainController {
    /** Reference to model related to this controller. */
    private MainModel main_model;
    /** Reference to view related to this controller. */
    private MainView main_view;
    
    public MainController (MainModel main_model, MainView main_view) {
        // Set related objects into proper positions in object.
        this.main_model = main_model;
        this.main_view = main_view;
        
        // Automatically add listeners to Main Panel via view.
        // Data
        main_view.addDataImportMenuListener (new DataImportMenuListener ());
        // Template
        main_view
                .addTemplateImportMenuListener (new TemplateImportMenuListener ());
        main_view.addTemplateSaveMenuListener (new TemplateSaveMenuListener ());
        // Data Filter
        main_view
                .addDataFilterImportMenuListener (new DataFilterImportMenuListener ());
        main_view
                .addDataFilterEditMenuListener (new DataFilterEditMenuListener ());
        main_view
                .addDataFilterSaveMenuListener (new DataFilterSaveMenuListener ());
        // Graph
        main_view.addGraphMenuListener (new GraphMenuListener ());
        // Exit
        main_view.addExitMenuListener (new ExitMenuListener ());
    }
    
    // Data Action Listener Inner Classes
    class DataImportMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> data_worker = new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.importData ();
                    main_view.updateViews ();
                    return null;
                }
                
            };
            
            data_worker.run ();
            
        }
        
    }
    
    // Template Action Listener Inner Classes
    class TemplateImportMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> template_import_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.importTemplate ();
                    System.out.println (main_model.getTemplate ().toString ());
                    main_view.updateViews ();
                    return null;
                }
                
            };
        }
        
    }
    
    class TemplateSaveMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> template_save_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.saveTemplate ();
                    return null;
                }
                
            };
        }
        
    }
    
    // Data Filter Action Listener Inner Classes
    class DataFilterImportMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> data_filter_import_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.importDataFilter ();
                    return null;
                }
                
            };
        }
        
    }
    
    class DataFilterEditMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> data_filter_exit_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.editDataFilter ();
                    return null;
                }
                
            };
        }
        
    }
    
    class DataFilterSaveMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> data_filter_save_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.saveDataFilter ();
                    return null;
                }
                
            };
        }
        
    }
    
    // Graph Action Listener Inner Class
    class GraphMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            SwingWorker <Void, Void> graph_worker = 
                    new SwingWorker <Void, Void> () {

                @Override
                protected Void doInBackground () throws Exception {
                    main_model.graph ();
                    return null;
                }
                
            };
        }
        
    }
    
    // Exit Action Listener Inner Class
    class ExitMenuListener implements ActionListener {
        
        @Override
        public void actionPerformed (ActionEvent arg0) {
            main_model.exit ();
        }
        
    }
    
}