package org.pvg.plasmagraph.utils.data;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.ArrayList;
import java.util.Iterator;

import javax.swing.JFileChooser;

// TODO: Add more JavaDoc comments!
public class DataFilter implements Iterator <String>, Iterable <String> {
    ArrayList <String> filter;
    
    public DataFilter () {
        filter = new ArrayList <String> ();
    }
    
    public DataFilter (JFileChooser f) {
        try (FileReader out = new FileReader (f.getSelectedFile () + ".daf")) {

            boolean eof = false;
            while (!eof) {
                String s = in.readLine ();
                if (!s.isEmpty ()) {
                    eof = filter.add (s);
                }
            }
            
            in.close ();
            
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace ();
            
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace ();
            
        }
    }
    
    public void save (JFileChooser f) {
        try (FileWriter out = new FileWriter (f.getSelectedFile () + ".daf")) {
            
            for (String s : filter) {
                out.write (s);
                out.write ("\n");
            }

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace ();
            
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace ();
            
        }
        
    }
    
    public boolean remove (int index) {
        return (filter.remove (index)) != null;
    }
    
    public boolean remove (String s) {
        return (filter.remove (s));
    }
    
    public boolean add (String s) {
        return (filter.add (s));
    }
    
    @Override
    public Iterator <String> iterator () {
        return (this.filter.iterator ());
    }
    
    @Override
    public boolean hasNext () {
        return (this.filter.iterator ().hasNext ());
    }
    
    @Override
    public String next () {
        return (this.filter.iterator ().next ());
    }
    
    @Override
    public void remove () {
        this.filter.iterator ().remove ();
    }
    
    @Override
    public String toString () {
        String s = "";
        for (String line : this.filter) {
            s += (line + "\n");
        }
        return (s);
    }
    
}
