package org.pvg.plasmagraph.models;

// Class Import Block
import java.util.ArrayList;

import org.pvg.plasmagraph.utils.data.DataColumn;
import org.pvg.plasmagraph.utils.data.DataSet;
import org.pvg.plasmagraph.utils.template.Template;

/**
 * Model for the modification of PlasmaGraph's data sets.
 * Manipulates both the data sets that will be used in the
 * graphs as well as the DataSetView itself.
 * 
 * @author Gerardo A. Navas Morales
 */
public class DataSetModel {
	/** Reference to MainModel's Template, passed via constructor reference. */
	private Template t;
	/** Reference to MainModel's DataSet, passed via constructor reference. */
	private DataSet ds;
	/** Container for all DataColumns found in the "available_dataset_list" JList. */
	private DataColumn [] list_dc;
	/** Container for all DataSets found in the "selected_dataset_list" JList. */
	private DataSet [] list_ds;
	
	/**
	 * Creates a new DataSetModel with references to the data and settings,
	 * as well as creates and updates its respective view.
	 * 
	 * @param t_reference Settings - Template reference provided by PlasmaGraph.
	 * @param ds_reference Data - DataSet reference provided by PlasmaGraph.
	 */
	public DataSetModel (Template t_reference, DataSet ds_reference) {
		// Update currently-used Template and Data Sources.
		t = t_reference;
		ds = ds_reference;
		
		// Unpack all DataColumns in "ds" before doing anything else.
		list_dc = updateAvailableDatasets ();
		
		// Update current view.
		updateDataSetView ();
	}

	/**
	 * Updates the "available_dataset_list" JList with every current 
	 * TODO: Call this when the DataSet "ds" changes, too!
	 */
	private DataColumn [] updateAvailableDatasets () {
		// TODO Auto-generated method stub
		ArrayList<DataColumn> return_dcs = new ArrayList<DataColumn> ();
		for (DataColumn c : ds.getColumns ()) {
			if (!(return_dcs.contains(c))) { return_dcs.add(c);}
		}
		
		return ((DataColumn []) return_dcs.toArray());
	}

	/**
	 * Updates DataSetView's TextBoxes and RadioButton Groups based on the current state of the Template.
	 */
	private void updateDataSetView () {
		// TODO Auto-generated method stub
		
	}
	
	/**
	 * Updates MainView's Template from data provided via this object's DataSetView.
	 */
	private void updateTemplate () {
		// TODO Auto-generated method stub
		
	}
}
